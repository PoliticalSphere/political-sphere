{
  "projectOverview": {
    "name": "Political Sphere",
    "description": "Democratically-governed political simulation with strong compliance and audit requirements",
    "architecture": "Workspace of handcrafted Node.js services, React dashboard, and shared utility libraries",
    "techStack": {
      "frontend": [
        "React",
        "JavaScript",
        "Node HTTP server"
      ],
      "backend": [
        "Node.js",
        "Express",
        "Custom HTTP server"
      ],
      "data": [
        "SQLite",
        "better-sqlite3"
      ],
      "testing": [
        "Node test runner",
        "Jest (partial)",
        "Playwright"
      ],
      "automation": [
        "Custom scripts in tools/scripts",
        "GitHub Actions"
      ]
    },
    "keyPrinciples": [
      "Democratic governance",
      "Constitutional compliance",
      "Zero-trust security",
      "WCAG 2.2 AA+ accessibility",
      "Ethical AI use",
      "Auditability of AI contributions"
    ]
  },
  "architecturalPatterns": {
    "services": {
      "api": "Custom HTTP server (apps/api/src/server.js) with domain services and SQLite stores",
      "gameServer": "Express layer (apps/game-server/src/index.js) orchestrating gameplay, moderation, age verification",
      "frontend": "Node server rendering React dashboard from static assets"
    },
    "sharedLibraries": {
      "libs/shared": "Precompiled logging, security headers, rate limiting helpers",
      "libs/game-engine": "Game state transition helpers consumed by the game server"
    },
    "tooling": {
      "automation": "Shell/Node scripts under tools/scripts, plus nightly GitHub workflow ai-maintenance.yml",
      "contextBundles": "Curated Markdown packs in ai/context-bundles/ generated by build-context-bundles.js",
      "indexGuard": "index-if-changed.js prevents unnecessary semantic index rebuilds",
      "analytics": "Script executions logged to ai/ai-metrics/analytics.db (fallback JSONL if SQLite unavailable)",
      "nx": "Configuration lives in tools/config but generators are currently dormant"
    },
    "security": {
      "zeroTrust": "Least privilege, strict header controls, rate limiting",
      "compliance": "AI governance via .blackboxrules and docs/controls.yml",
      "logging": "Structured JSON logging across services"
    }
  },
  "commonIssues": {
    "missingModules": {
      "symptom": "Runtime cannot resolve @political-sphere/shared",
      "solution": "Run npm install at repo root to hydrate node_modules/",
      "prevention": "Avoid moving compiled outputs out of libs/shared/src"
    },
    "sqliteMigrations": {
      "symptom": "Tables missing or schema drift after changes",
      "solution": "Use apps/api/src/migrations/index.js to rerun migrations or reset DB",
      "prevention": "Keep migrations ordered and update validation logic"
    },
    "moderationAPIFailures": {
      "symptom": "Remote moderation fallback logging repeated failures",
      "solution": "Check MODERATION_API_URL/API_KEY env vars, inspect reports/ for compliance logs",
      "prevention": "Document expected endpoints in configs before deployment"
    },
    "accessibility": {
      "symptom": "Playwright accessibility test fails",
      "solution": "Run npx playwright test apps/frontend/tests/accessibility.test.js and address ARIA/contrast issues",
      "prevention": "Follow accessible component patterns in apps/frontend/src/components/"
    }
  },
  "bestPractices": {
    "codeStyle": {
      "modules": "Prefer ESM in services already using import/export; maintain CommonJS in compiled shared libs",
      "naming": "kebab-case files, PascalCase components, camelCase variables",
      "logging": "Always log structured JSON with correlation metadata"
    },
    "testing": {
      "api": "Use node --test or Jest harnesses under apps/api/tests/",
      "frontend": "Execute Playwright accessibility suites after UI work",
      "scripts": "Smoke compliance scripts in apps/game-server/scripts/ after behavioural changes"
    },
    "documentation": {
      "history": "Log substantial sessions in ai/history/",
      "todo": "Update docs/TODO.md when gates are deferred or new work is discovered",
      "adr": "Capture architectural decisions in docs/architecture/decisions/"
    }
  },
  "developmentWorkflow": {
    "branching": "Feature branches from main with pull-request review",
    "commits": "Follow conventional commits when possible; include rationale for data migrations",
    "runtime": "Use direct node invocations (e.g. node apps/api/src/server.js) rather than Nx wrappers",
    "qualityGates": "Manual run of lint/tests/accessibility until automation is restored"
  },
  "performancePatterns": {
    "api": "Keep queries batched; reuse prepared statements via better-sqlite3",
    "gameServer": "Avoid blocking operations inside request handlers; persist snapshots off the hot path",
    "frontend": "Defer heavy API fetching to server.js; cache template contents in memory",
    "monitoring": "Leverage libs/shared telemetry hooks; review ai-metrics.json, ai/ai-metrics/stats.json, and analytics.db after automated runs"
  },
  "lastUpdated": "2025-11-05T14:57:37.655Z",
  "version": "1.2.3"
}