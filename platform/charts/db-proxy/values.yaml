nameOverride: "db-proxy"
fullnameOverride: ""

image:
  repository: bitnami/pgbouncer
  tag: 1.22.1
  pullPolicy: IfNotPresent

replicaCount: 2

serviceAccount:
  create: true
  annotations: {}
  name: ""

service:
  type: ClusterIP
  port: 6432

config:
  databases: |
    politicalsphere = host={{ .Values.backend.host }} port={{ .Values.backend.port }} auth_user=pgbouncer
  pgbouncer: |
    [pgbouncer]
    listen_port = 6432
    listen_addr = 0.0.0.0
    auth_type = scram-sha-256
    auth_file = /etc/pgbouncer/userlist.txt
    pool_mode = transaction
    max_client_conn = 1000
    default_pool_size = 100
    server_tls_sslmode = verify-full

backend:
  host: political-sphere-dev.cle2abcxyz.us-east-1.rds.amazonaws.com
  port: 5432

authSecret:
  name: pgbouncer-auth
  key: userlist.txt

resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 500m
    memory: 512Mi

nodeSelector: {}

tolerations: []

affinity: {}

podAnnotations: {}

extraEnv: []
