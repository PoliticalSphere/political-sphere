{{- $envs := list "dev" "staging" "prod" "ci" -}}
{{- range $env := $envs }}
apiVersion: v1
kind: Namespace
metadata:
  name: {{ $env }}
  labels:
    app.kubernetes.io/managed-by: platform-core
    platform.political-sphere.io/environment: {{ $env }}
---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: {{ $env }}-resource-quota
  namespace: {{ $env }}
  labels:
    app.kubernetes.io/managed-by: platform-core
spec:
  hard:
    requests.cpu: "4"
    requests.memory: 8Gi
    limits.cpu: "8"
    limits.memory: 16Gi
    persistentvolumeclaims: "10"
---
apiVersion: v1
kind: LimitRange
metadata:
  name: {{ $env }}-defaults
  namespace: {{ $env }}
  labels:
    app.kubernetes.io/managed-by: platform-core
spec:
  limits:
    - type: Container
      default:
        cpu: 500m
        memory: 512Mi
      defaultRequest:
        cpu: 250m
        memory: 256Mi
      max:
        cpu: "2"
        memory: 2Gi
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: {{ $env }}-deny-all
  namespace: {{ $env }}
  labels:
    app.kubernetes.io/managed-by: platform-core
spec:
  podSelector: {}
  policyTypes:
    - Ingress
    - Egress
{{- end }}
